<div class="catalogo-trabajos-container">
  <div class="catalogo-wrapper">
    <div class="header-catalogo">
      <h1 class="title-industrial">Cat√°logo de Trabajos</h1>
      <p class="subtitulo">Registro y seguimiento de trabajos en taller</p>
    </div>
    
    <div class="card-catalogo-trabajos">
      @if(cargando()){
        <div class="estado-container">
          <div class="cargando-spinner"></div>
          <p>Cargando trabajos...</p>
        </div>
      }
      
      @if(!cargando() && trabajos().length === 0){
        <div class="estado-container">
          <div class="icono-vacio">üîß</div>
          <h3>No hay trabajos registrados</h3>
          <p>Agrega tu primer trabajo para comenzar</p>
        </div>
      }
      
      @if(!cargando() && trabajos().length > 0){
        <table class="tabla-trabajos">
          <thead>
            <tr>
              <th>ID</th>
              <th>Cliente</th>
              <th>Descripci√≥n</th>
              <th>Empleados Asignados</th>
              <th>Diagn√≥stico</th>
              <th>Marca</th>
              <th>Modelo</th>
              <th>N√∫mero de Serie</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            @for (item of trabajos(); track item.id){
              <tr>
                <td>{{item.id}}</td>
                <td>{{item.cliente}}</td>
                <td>{{item.descripcion}}</td>
                <td>{{item.empleados_asignados}}</td>
                <td>{{item.diagnostico}}</td>
                <td>{{item.marca}}</td>
                <td>{{item.modelo}}</td>
                <td>{{item.numero_serie}}</td>
                <td class="acciones">
                  <button class="btn-editar" (click)="editarTrabajo(item.id)">
                    ‚úèÔ∏è Editar
                  </button>
                  <button class="btn-eliminar" (click)="eliminarTrabajo(item.id)">
                    üóëÔ∏è Eliminar
                  </button>
                </td>
              </tr>
            }
          </tbody>
        </table>
      }
    </div>
  </div>
</div>

@if(mostrarModal() && trabajoEditando()){
<div class="modal-overlay" (click)="cancelarEdicion()">
  <div class="modal-contenido" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Editar Trabajo</h2>
      <button class="modal-cerrar" (click)="cancelarEdicion()">√ó</button>
    </div>
    
    <div class="modal-body">
      <form (ngSubmit)="guardarCambios()" #formEditar="ngForm">
        <div class="form-group">
          <label>Cliente:</label>
          <input type="text" [(ngModel)]="trabajoEditando()!.cliente" 
                 name="cliente" required class="form-control">
        </div>
        
        <div class="form-group">
          <label>Descripci√≥n:</label>
          <textarea [(ngModel)]="trabajoEditando()!.descripcion" 
                    name="descripcion" required class="form-control" rows="3"></textarea>
        </div>
        
        <div class="form-group">
          <label>Empleados Asignados:</label>
          <input type="text" [(ngModel)]="trabajoEditando()!.empleados_asignados" 
                 name="empleados_asignados" class="form-control">
        </div>
        
        <div class="form-group">
          <label>Diagn√≥stico:</label>
          <textarea [(ngModel)]="trabajoEditando()!.diagnostico" 
                    name="diagnostico" class="form-control" rows="3"></textarea>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label>Marca:</label>
            <input type="text" [(ngModel)]="trabajoEditando()!.marca" 
                   name="marca" class="form-control">
          </div>
          
          <div class="form-group">
            <label>Modelo:</label>
            <input type="text" [(ngModel)]="trabajoEditando()!.modelo" 
                   name="modelo" class="form-control">
          </div>
        </div>
        
        <div class="form-group">
          <label>N√∫mero de Serie:</label>
          <input type="text" [(ngModel)]="trabajoEditando()!.numero_serie" 
                 name="numero_serie" class="form-control">
        </div>
        
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="cancelarEdicion()">
            Cancelar
          </button>
          <button type="submit" class="btn btn-primary" [disabled]="!formEditar.form.valid">
            Guardar Cambios
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
}